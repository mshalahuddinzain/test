<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Untuk Kamu ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  height: 100vh;
  background: radial-gradient(circle at bottom, #020617, #0b1026);
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: 'Playfair Display', serif;
  overflow: hidden;
}

/* FIREWORKS */
.fireworks span {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: hsl(var(--h),100%,70%);
  animation: explode 2s ease-out infinite;
}

@keyframes explode {
  from { transform: scale(0); opacity: 1; }
  to { transform: scale(7); opacity: 0; }
}

/* ENVELOPE */
.envelope {
  position: relative;
  width: 320px;
  height: 210px;
  cursor: pointer;
  z-index: 5;
}

.env-back {
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, #fff1f2, #ffe4e6);
  border-radius: 14px;
}

.env-front {
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, #fda4af, #fb7185);
  clip-path: polygon(0 0,50% 60%,100% 0,100% 100%,0 100%);
  z-index: 3;
}

.env-flap {
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, #fb7185, #e11d48);
  clip-path: polygon(0 0,50% 60%,100% 0);
  transform-origin: top;
  transition: transform 1s ease;
  z-index: 4;
}

.envelope.open .env-flap {
  transform: rotateX(180deg);
}

/* PAPER */
.paper {
  position: absolute;
  width: 280px;
  background: #fffaf7;
  top: 15px;
  left: 20px;
  padding: 22px;
  text-align: center;
  opacity: 0;
  transform: translateY(50px);
  transition: 1s ease;
  border-radius: 6px;
  box-shadow: 0 18px 30px rgba(0,0,0,.25);
}

.envelope.open .paper {
  opacity: 1;
  transform: translateY(-90px);
  z-index: 6;
}

.to {
  font-size: 14px;
  color: #9f1239;
  margin-bottom: 10px;
}

.message {
  font-size: 17px;
  line-height: 1.8;
  color: #7f1d1d;
}

.heart {
  margin-top: 10px;
  font-size: 22px;
  opacity: 0;
  animation: pulse 1.5s infinite;
}

@keyframes pulse {
  50% { transform: scale(1.3); }
}

/* FLOWERS */
.flower {
  position: fixed;
  top: -10px;
  animation: fall linear infinite;
}

@keyframes fall {
  to { transform: translateY(110vh) rotate(360deg); }
}

/* MUSIC BUTTON */
#musicToggle {
  position: fixed;
  top: 16px;
  right: 16px;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  border: none;
  background: rgba(255,255,255,.15);
  color: white;
  font-size: 18px;
  cursor: pointer;
  z-index: 10;
}

/* MOBILE */
@media (max-width: 768px) {
  .envelope { width: 90vw; height: calc(90vw * .65); }
  .paper { width: 85vw; left: 2.5vw; }
  .message { font-size: 18px; }
}
</style>
</head>
<body>

<div class="fireworks" id="fireworks"></div>

<audio id="bgMusic" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>
<button id="musicToggle">üîä</button>

<div class="envelope" id="envelope">
  <div class="env-flap"></div>
  <div class="paper">
    <div class="to">Untuk kamu, <strong>Jihan</strong></div>
    <div class="message" id="message"></div>
    <div class="heart" id="heart">‚ù§Ô∏è</div>
  </div>
  <div class="env-front"></div>
  <div class="env-back"></div>
</div>

<script>
const fireworks = document.getElementById('fireworks');
setInterval(() => {
  const f = document.createElement('span');
  f.style.left = Math.random()*100 + 'vw';
  f.style.top = Math.random()*60 + 'vh';
  f.style.setProperty('--h', Math.random()*360);
  fireworks.appendChild(f);
  setTimeout(()=>f.remove(),2000);
},600);

const messages = [
  "Selamat tahun baru, sayanggku, cintaaku, manisku, comelku, cantikku, bocilku ‚ù§Ô∏è",
  "Sejak kita bersama beberapa bulan terakhir, aku mulai menyadari bahwa hal-hal sederhana terasa jauh lebih hangat ketika dijalani dengan kamu.",
  "Aku suka cara kamu hadir di hidupku, bahkan lewat hal-hal kecil yang mungkin tidak kamu sadari.",
  "Aku berharap tahun ini bisa kita jalani pelan-pelan, saling mengenal lebih dalam, dan menikmati setiap proses kecil yang kita lewati bersama.",
  "Dan untuk sekarang, itu sudah lebih dari cukup buatku."
];

let opened=false, index=0;
const envelope=document.getElementById('envelope');
const message=document.getElementById('message');
const music=document.getElementById('bgMusic');
const toggle=document.getElementById('musicToggle');
const heart=document.getElementById('heart');

toggle.onclick = (e) => {
  e.stopPropagation();
  if (music.muted) {
    music.muted = false;
    toggle.textContent = 'üîä';
  } else {
    music.muted = true;
    toggle.textContent = 'üîá';
  }
};


envelope.onclick = () => {
  if (!opened) {
    // pertama kali buka
    opened = true;
    envelope.classList.add('open');
    index = 0;
    message.innerText = messages[index];
    music.volume = 0.25;
    music.play();
    launchFlowers();
    heart.style.opacity = 0;

  } else {
    index++;

    // masih ada pesan
    if (index < messages.length) {
      message.style.opacity = 0;
      setTimeout(() => {
        message.innerText = messages[index];
        message.style.opacity = 1;
      }, 300);

      if (index === messages.length - 1) {
        heart.style.opacity = 1;
      }

    } else {
      // RESET HALUS (LOOP)
      opened = false;
      index = 0;
      heart.style.opacity = 0;
      envelope.classList.remove('open');
      message.innerText = "";
    }
  }
};


function launchFlowers(){
  ['üå∏','üå∑','üåº'].forEach(f=>{
    for(let i=0;i<8;i++){
      const el=document.createElement('div');
      el.className='flower';
      el.innerText=f;
      el.style.left=Math.random()*100+'vw';
      el.style.animationDuration=4+Math.random()*4+'s';
      document.body.appendChild(el);
    }
  });
}
</script>

</body>
</html>
